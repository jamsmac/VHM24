# ============================================================================
# VendHub Manager - Environment Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# Application
# ----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=vendhub
DATABASE_PASSWORD=vendhub_secure_password_2024
DATABASE_NAME=vendhub_db

# Database Connection Pool (for production performance)
DB_POOL_MAX=20
DB_POOL_MIN=5

# ----------------------------------------------------------------------------
# JWT Authentication
# ----------------------------------------------------------------------------
# Generate secure random strings:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_jwt_secret_key_here_minimum_32_characters_recommended
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# ----------------------------------------------------------------------------
# 2FA Encryption (for Two-Factor Authentication secrets)
# ----------------------------------------------------------------------------
# CRITICAL: Generate a secure 32-byte (64 hex characters) encryption key
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# NEVER share this key or commit it to version control
# Store securely in production (AWS Secrets Manager, Vault, etc.)
ENCRYPTION_KEY=generate_32_byte_key_with_command_above_64_hex_characters

# ----------------------------------------------------------------------------
# Initial Admin Setup (for seeding)
# ----------------------------------------------------------------------------
# SECURITY: Set a strong password for initial admin account
# This is ONLY used during database seeding (npm run seed)
# MUST be changed immediately after first login
# Generate secure password: node -e "console.log(require('crypto').randomBytes(16).toString('base64'))"
INITIAL_ADMIN_PASSWORD=

# ----------------------------------------------------------------------------
# Password Policy (REQ-AUTH-41)
# ----------------------------------------------------------------------------
# Minimum password length (default: 8)
PASSWORD_MIN_LENGTH=8

# Maximum password length (default: 128)
PASSWORD_MAX_LENGTH=128

# Require at least one uppercase letter (default: true)
PASSWORD_REQUIRE_UPPERCASE=true

# Require at least one lowercase letter (default: true)
PASSWORD_REQUIRE_LOWERCASE=true

# Require at least one digit (default: true)
PASSWORD_REQUIRE_DIGIT=true

# Require at least one special character (default: true)
PASSWORD_REQUIRE_SPECIAL_CHAR=true

# Allowed special characters (default: @$!%*?&#)
PASSWORD_SPECIAL_CHARS=@$!%*?&#

# ----------------------------------------------------------------------------
# Session Management (REQ-AUTH-54, 55, 61)
# ----------------------------------------------------------------------------
# Maximum concurrent sessions per user (default: 5)
MAX_SESSIONS_PER_USER=5

# Session expiration in days (default: 7)
SESSION_EXPIRATION_DAYS=7

# ----------------------------------------------------------------------------
# Brute-Force Protection (REQ-AUTH-44)
# ----------------------------------------------------------------------------
# Maximum failed login attempts before account lockout (default: 5)
BRUTE_FORCE_MAX_ATTEMPTS=5

# Account lockout duration in minutes (default: 15)
BRUTE_FORCE_LOCKOUT_MINUTES=15

# ----------------------------------------------------------------------------
# Redis Cache
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ----------------------------------------------------------------------------
# File Upload Configuration
# ----------------------------------------------------------------------------
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg,application/pdf

# ----------------------------------------------------------------------------
# S3 Storage Configuration (Cloudflare R2 / MinIO / AWS S3)
# ----------------------------------------------------------------------------
# For Local Development with MinIO (included in docker-compose.yml):
#   S3_ENDPOINT=http://minio:9000
#   S3_ACCESS_KEY=vendhub_minio
#   S3_SECRET_KEY=vendhub_minio_password_dev
#   S3_BUCKET=vendhub
#   S3_REGION=us-east-1
#
# For Production with Cloudflare R2:
#   S3_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
#   S3_ACCESS_KEY=<r2-access-key-id>
#   S3_SECRET_KEY=<r2-secret-access-key>
#   S3_BUCKET=vendhub
#   S3_REGION=auto
#   S3_PUBLIC_URL=https://<custom-domain-or-r2-dev-url>  # Optional for public URLs
#
# For Production with AWS S3:
#   S3_ENDPOINT=  # Leave empty for AWS
#   S3_ACCESS_KEY=<aws-access-key-id>
#   S3_SECRET_KEY=<aws-secret-access-key>
#   S3_BUCKET=vendhub
#   S3_REGION=us-east-1
#   S3_PUBLIC_URL=  # Optional for CloudFront CDN

S3_ENDPOINT=http://localhost:9000
S3_BUCKET=vendhub
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_PUBLIC_URL=

# ----------------------------------------------------------------------------
# Frontend Configuration
# ----------------------------------------------------------------------------
FRONTEND_URL=http://localhost:3001

# ----------------------------------------------------------------------------
# Telegram Bot (Optional)
# ----------------------------------------------------------------------------
# Get token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=

# ----------------------------------------------------------------------------
# Email Service (Optional - for future implementation)
# ----------------------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@vendhub.com
SMTP_FROM_NAME=VendHub Manager

# ----------------------------------------------------------------------------
# SMS Service (Optional - for future implementation)
# ----------------------------------------------------------------------------
# Example: Twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ----------------------------------------------------------------------------
# Monitoring & Logging
# ----------------------------------------------------------------------------
LOG_LEVEL=info
SENTRY_DSN=

# ----------------------------------------------------------------------------
# Rate Limiting (API Throttling)
# ----------------------------------------------------------------------------
# TTL in milliseconds (60000 = 1 minute)
THROTTLE_TTL=60000
# Maximum requests per TTL window
THROTTLE_LIMIT=100

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:3001,http://localhost:3000

# ----------------------------------------------------------------------------
# Scheduled Tasks (Cron)
# ----------------------------------------------------------------------------
ENABLE_SCHEDULED_TASKS=true
NOTIFICATION_CHECK_INTERVAL=*/5 * * * *
LOW_STOCK_CHECK_INTERVAL=0 */6 * * *
OVERDUE_TASK_CHECK_INTERVAL=0 * * * *

# ----------------------------------------------------------------------------
# Web Push Notifications (Browser Push)
# ----------------------------------------------------------------------------
# Generate VAPID keys using: npm run generate-vapid-keys
# Or use the WebPushService.generateVapidKeys() method
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_EMAIL=admin@vendhub.com
