# VendHub Manager - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

> **–í–µ—Ä—Å–∏—è**: 2.0.0
> **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-12-20

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ 4 —á–∞—Å—Ç–∏:

### üìã [01-AUTH-OVERVIEW.md](./01-AUTH-OVERVIEW.md)
**–û–±–∑–æ—Ä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

- –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –î–≤–æ–π–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Staff + Client)
- JWT —Ç–æ–∫–µ–Ω—ã (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (User entity)
- –†–æ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

### üîê [02-AUTH-LOGIN-FLOWS.md](./02-AUTH-LOGIN-FLOWS.md)
**–°—Ü–µ–Ω–∞—Ä–∏–∏ –í—Ö–æ–¥–∞**

- –û–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—Ö–æ–¥–∞ (decision tree)
- –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
- –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í—Ö–æ–¥ —Å 2FA
- –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ (—Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è)
- –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ê–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- –°—Ü–µ–Ω–∞—Ä–∏–π 6: Rate limit
- –°—Ü–µ–Ω–∞—Ä–∏–π 7: IP –Ω–µ –≤ whitelist
- –°—Ü–µ–Ω–∞—Ä–∏–π 8: –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (Refresh)
- –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã (Logout)
- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

### üîë [03-AUTH-2FA.md](./03-AUTH-2FA.md)
**–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**

- –û–±–∑–æ—Ä TOTP
- TOTP –∞–ª–≥–æ—Ä–∏—Ç–º (RFC 6238)
- AES-256-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 2FA (QR-–∫–æ–¥)
- –í–∫–ª—é—á–µ–Ω–∏–µ 2FA
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–¥—ã
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ 2FA
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
- API endpoints

### üõ°Ô∏è [04-AUTH-SESSIONS-SECURITY.md](./04-AUTH-SESSIONS-SECURITY.md)
**–°–µ—Å—Å–∏–∏ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ (max 5, —Ä–æ—Ç–∞—Ü–∏—è)
- Token Blacklist (Redis)
- Rate Limiting
- Brute Force Protection
- IP Whitelist
- –ê—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Cookie Security
- JWT Security
- Password Security
- Security Headers

---

## –ë—ã—Å—Ç—Ä—ã–µ –°—Å—ã–ª–∫–∏

### API Endpoints

| Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `POST /auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |
| `POST /auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `POST /auth/refresh` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ |
| `POST /auth/logout` | –í—ã—Ö–æ–¥ |
| `GET /auth/profile` | –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `POST /auth/2fa/setup` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 2FA |
| `POST /auth/2fa/enable` | –í–∫–ª—é—á–µ–Ω–∏–µ 2FA |
| `POST /auth/2fa/login` | –í—Ö–æ–¥ —Å 2FA |
| `GET /auth/sessions` | –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ |

### –ö–ª—é—á–µ–≤—ã–µ –§–∞–π–ª—ã

```
backend/src/modules/auth/
‚îú‚îÄ‚îÄ auth.controller.ts          # 589 —Å—Ç—Ä–æ–∫ - REST API
‚îú‚îÄ‚îÄ auth.service.ts             # 877 —Å—Ç—Ä–æ–∫ - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ session.service.ts      # 320 —Å—Ç—Ä–æ–∫ - —Å–µ—Å—Å–∏–∏
    ‚îú‚îÄ‚îÄ two-factor-auth.service.ts  # 349 —Å—Ç—Ä–æ–∫ - 2FA
    ‚îî‚îÄ‚îÄ token-blacklist.service.ts  # 238 —Å—Ç—Ä–æ–∫ - Redis
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# JWT
JWT_SECRET=...                    # Min 32 —Å–∏–º–≤–æ–ª–∞
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# Security
BCRYPT_SALT_ROUNDS=10
BRUTE_FORCE_MAX_ATTEMPTS=5
BRUTE_FORCE_LOCKOUT_MINUTES=15

# 2FA
TWO_FA_APP_NAME=VendHub
TWO_FA_ENCRYPTION_KEY=...         # 32 –±–∞–π—Ç–∞

# Redis
REDIS_URL=redis://localhost:6379
```

---

## –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|--------|------|-----------|
| 2.0.0 | 2025-12-20 | –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
| 1.0.0 | 2025-12-19 | –ù–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |

---

**–ê–≤—Ç–æ—Ä**: VendHub Development Team
